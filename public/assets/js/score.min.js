!function(e){"use strict";let t=null;const s=(...e)=>{false},a=()=>{const t=Date.now()+4e3;function s(e,t){return Math.random()*(t-e)+e}const a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999",document.body.appendChild(a);const n=document.createElement("div");n.innerHTML="🏆",n.style.cssText="\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            transform: translate(-50%, -50%) scale(0);\n            font-size: 100px;\n            z-index: 10000;\n            animation: trophyPop 1s ease-out forwards;\n        ",a.appendChild(n);const r=document.createElement("style");r.textContent="\n            @keyframes trophyPop {\n                0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); }\n                50% { transform: translate(-50%, -50%) scale(1.3) rotate(10deg); }\n                100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }\n            }\n            @keyframes starSpin {\n                to { transform: rotate(360deg); }\n            }\n        ",document.head.appendChild(r),setTimeout(()=>{n.style.opacity="0",n.style.transition="opacity 1s",setTimeout(()=>n.remove(),1e3)},2e3);const o=["square","circle","triangle","star","heart"],c=["#FFD700","#FFA500","#FF69B4","#00CED1","#9370DB","#32CD32","#FF6347","#4169E1"],l=["⭐","✨","💫","🎉","🎊","🥳","🎯","💯"],i=setInterval(function(){const n=t-Date.now();if(n<=0)return clearInterval(i),void setTimeout(()=>{a.remove(),r.remove()},1e3);const d=n/4e3*30;for(let t=0;t<d;t++){const t=document.createElement("div"),n=Math.random()<.3,r=o[Math.floor(Math.random()*o.length)],i=c[Math.floor(Math.random()*c.length)],d=s(8,15);if(n)t.innerHTML=l[Math.floor(Math.random()*l.length)],t.style.cssText=`\n                        position: absolute;\n                        font-size: ${2*d}px;\n                        left: ${s(0,100)}%;\n                        top: -20px;\n                        opacity: 1;\n                        pointer-events: none;\n                    `;else{switch(r){case"star":t.innerHTML=`\n                                <svg width="${2*d}" height="${2*d}" viewBox="0 0 24 24" style="animation: starSpin 3s linear infinite;">\n                                    <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" \n                                          fill="${i}" stroke="${i}" stroke-width="1"/>\n                                </svg>\n                            `;break;case"heart":t.innerHTML=`\n                                <svg width="${1.5*d}" height="${1.5*d}" viewBox="0 0 24 24">\n                                    <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" \n                                          fill="${i}"/>\n                                </svg>\n                            `;break;case"triangle":t.style.cssText=`\n                                position: absolute;\n                                width: 0;\n                                height: 0;\n                                border-left: ${d}px solid transparent;\n                                border-right: ${d}px solid transparent;\n                                border-bottom: ${1.7*d}px solid ${i};\n                                left: ${s(0,100)}%;\n                                top: -20px;\n                                opacity: 1;\n                                pointer-events: none;\n                            `;break;case"circle":t.style.cssText=`\n                                position: absolute;\n                                width: ${d}px;\n                                height: ${d}px;\n                                background: ${i};\n                                border-radius: 50%;\n                                left: ${s(0,100)}%;\n                                top: -10px;\n                                opacity: 1;\n                                pointer-events: none;\n                                box-shadow: 0 0 ${d/2}px ${i}40;\n                            `;break;default:t.style.cssText=`\n                                position: absolute;\n                                width: ${d}px;\n                                height: ${d}px;\n                                background: linear-gradient(45deg, ${i}, ${i}dd);\n                                left: ${s(0,100)}%;\n                                top: -10px;\n                                opacity: 1;\n                                transform: rotate(${s(0,360)}deg);\n                                pointer-events: none;\n                                box-shadow: 0 0 ${d/2}px ${i}40;\n                            `}"star"!==r&&"heart"!==r||(t.style.position="absolute",t.style.left=`${s(0,100)}%`,t.style.top="-20px",t.style.opacity="1",t.style.pointerEvents="none")}a.appendChild(t);const m=s(0,360),g=s(15,30),u=.3,x=.99;let p=0,h=0,_=g*Math.cos(m*Math.PI/180),f=g*Math.sin(m*Math.PI/180)-s(5,15),v=1,y=s(0,360),b=s(-10,10);const w=()=>{f+=u,_*=x,p+=_,h+=f,v-=.01,y+=b,t.style.transform=`translate(${p}px, ${h}px) rotate(${y}deg) scale(${v})`,t.style.opacity=v,v>0&&h<e.innerHeight?requestAnimationFrame(w):t.remove()};requestAnimationFrame(w)}},150)},n=async(e,t="GET",s=null)=>{try{const a={url:`/requests/score${e}`,method:t,headers:{"X-Requested-With":"XMLHttpRequest"}};s&&"GET"!==t&&(a.data=s);return await $.ajax(a)}catch(e){const t=e.responseJSON?.message||e.statusText||"API call failed";if(401===e.status)throw new Error("Authentication required!");throw new Error(t)}};e.__arcadeSubmitScore=async(o,c={})=>{try{const l=t||r();if(!l)return{success:!1,error:"No game ID available"};if("number"!=typeof o||o<0)return{success:!1,error:"Score must be a positive number"};s();const i=await n("/submit-score","POST",{game_id:l,score:o,score_data:c});return 200===i.status&&(s(),"function"==typeof e.refreshLeaderboard&&e.refreshLeaderboard(),i.data&&i.data.isPersonalBest?(((e,t)=>{if(a(),"undefined"!=typeof iziToast){const s=t?` ${__("games.previous_record")}: ${t.toLocaleString()}`:"";try{iziToast.success({title:__("games.new_personal_best"),message:__("games.personal_best_message",{score:e.toLocaleString(),previousBest:s}),position:"topLeft",timeout:5e3,backgroundColor:"#f59e0b",titleColor:"#fff",messageColor:"#fff",icon:!1,displayMode:"replace"})}catch(e){}}})(o,i.data.previousBest),e.user&&e.user.id&&(async(t,s,a)=>{try{const n=$("#game-container").closest("main").find("h1").first().text()||"a game";if(e.arcade&&e.arcade.websocket&&e.arcade.websocket.isConnected()){const r={userId:t,gameId:s,gameTitle:n,score:a};e.arcade.websocket.send("personal_best_achieved",r)}}catch(e){}})(e.user.id,t,o)):i.data&&(e=>{"undefined"!=typeof iziToast&&iziToast.success({title:__("games.score_submitted_title"),message:__("games.score_submitted_message",{score:e.toLocaleString()}),position:"topLeft",timeout:3e3,backgroundColor:"#10b981",titleColor:"#fff",messageColor:"#fff",icon:!1,displayMode:"replace"})})(o)),401===i.status&&(t=>{if(t<1)return;if("function"==typeof e.showTemplateCompetitivePopup)try{return e.showTemplateCompetitivePopup(t)}catch(e){}const s=document.getElementById("competitive-login-popup");s&&s.remove();const a=document.createElement("div");a.id="competitive-login-popup",a.className="fixed inset-0 bg-black/50 backdrop-blur-sm z-[10000] flex items-start sm:items-center justify-center p-4 animate-in fade-in duration-300 overflow-y-auto";const n=document.createElement("div");n.className="bg-white dark:bg-gray-800 rounded-2xl shadow-lg dark:shadow-2xl border border-gray-100 dark:border-gray-700 overflow-hidden max-w-4xl w-full animate-in slide-in-from-bottom-8 duration-300 my-4 sm:my-8 max-h-screen sm:max-h-[90vh] overflow-y-auto",n.innerHTML=`\n            <style>\n                @keyframes pulse-score {\n                    0%, 100% { transform: scale(1); }\n                    50% { transform: scale(1.05); }\n                }\n                @keyframes trophy-bounce {\n                    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }\n                    40% { transform: translateY(-5px); }\n                    60% { transform: translateY(-3px); }\n                }\n                .score-pulse { animation: pulse-score 2s ease-in-out infinite; }\n                .trophy-bounce { animation: trophy-bounce 2s ease-in-out infinite; }\n                \n                /* Mobile scrolling improvements */\n                #competitive-login-popup {\n                    -webkit-overflow-scrolling: touch;\n                    scroll-behavior: smooth;\n                }\n                \n                /* Ensure content doesn't get cut off on very short screens */\n                @media (max-height: 600px) {\n                    .popup-content {\n                        padding-top: 1rem;\n                        padding-bottom: 1rem;\n                    }\n                }\n            </style>\n            \n            <div class="grid grid-cols-1 lg:grid-cols-2 min-h-[350px] sm:min-h-[400px] lg:min-h-[500px]">\n                \x3c!-- Left Column - Score Display --\x3e\n                <div class="p-4 sm:p-6 lg:p-8 flex flex-col justify-center relative">\n                    <button class="absolute top-4 right-4 w-8 h-8 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-600 dark:text-gray-300 rounded-full flex items-center justify-center text-lg font-bold transition-all hover:scale-110" \n                            onclick="document.getElementById('competitive-login-popup').remove()">×</button>\n                    \n                    \x3c!-- Score Header --\x3e\n                    <div class="text-center mb-4 sm:mb-6 lg:mb-8">\n                        <div class="mx-auto h-10 w-10 sm:h-12 sm:w-12 lg:h-16 lg:w-16 flex items-center justify-center rounded-full bg-orange-100 mb-3 sm:mb-4 trophy-bounce">\n                            <span class="text-orange-500 text-xl sm:text-2xl lg:text-3xl">🏆</span>\n                        </div>\n                        <h1 class="text-gray-600 dark:text-gray-200 text-lg sm:text-xl lg:text-2xl font-bold mb-2">${__("games.amazing_score")}</h1>\n                        <div class="text-2xl sm:text-3xl lg:text-4xl xl:text-5xl font-black text-orange-500 mb-2 score-pulse">\n                            ${t.toLocaleString()}\n                        </div>\n                        <p class="text-gray-500 dark:text-gray-400 text-xs sm:text-sm">\n                            ${__("games.join_competition")}\n                        </p>\n                    </div>\n\n                    \x3c!-- Login Form Section --\x3e\n                    <div class="space-y-3 sm:space-y-4 lg:space-y-6">\n                        <div class="text-center">\n                            <h3 class="text-base sm:text-lg lg:text-xl font-semibold text-gray-700 dark:text-gray-200 mb-2 sm:mb-3">${__("games.ready_to_compete")}</h3>\n                            <p class="text-gray-500 dark:text-gray-400 text-xs sm:text-sm leading-relaxed">\n                                ${__("games.login_to_compete")}\n                            </p>\n                        </div>\n\n                        \x3c!-- Action Buttons --\x3e\n                        <div class="space-y-2 sm:space-y-3">\n                            <button class="w-full bg-black dark:bg-gray-700 text-white py-2.5 sm:py-3 px-4 rounded-xl font-medium hover:bg-gray-800 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-orange-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] flex items-center justify-center text-sm sm:text-base" \n                                    onclick="document.getElementById('competitive-login-popup').remove(); if (window.pjax) { window.pjax.loadUrl('/login'); } else { window.location.href = '/login'; }">\n                                <svg class="w-4 h-4 sm:w-5 sm:h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"/>\n                                </svg>\n                                ${__("games.login_to_save_score")}\n                            </button>\n                            <button class="w-full bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-200 py-2.5 sm:py-3 px-4 rounded-xl font-medium hover:bg-gray-200 dark:hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-orange-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-all duration-200 text-sm sm:text-base" \n                                    onclick="document.getElementById('competitive-login-popup').remove()">\n                                ${__("games.maybe_later")}\n                            </button>\n                        </div>\n\n                        <div class="text-center text-xs sm:text-sm text-gray-500 dark:text-gray-400">\n                            ${__("auth.no_account")} \n                            <a href="#" class="text-orange-500 dark:text-orange-400 hover:text-orange-600 dark:hover:text-orange-300 font-medium transition-colors duration-200"\n                               onclick="event.preventDefault(); document.getElementById('competitive-login-popup').remove(); if (window.pjax) { window.pjax.loadUrl('/register'); } else { window.location.href = '/register'; }">\n                                ${__("auth.sign_up_here")}\n                            </a>\n                        </div>\n                    </div>\n                </div>\n                \n                \x3c!-- Right Column - Benefits --\x3e\n                <div class="bg-gray-50 dark:bg-gray-700 p-4 sm:p-6 lg:p-8 flex flex-col justify-center">\n                    \x3c!-- Header --\x3e\n                    <div class="text-center mb-4 sm:mb-6 lg:mb-8">\n                        <h2 class="text-base sm:text-lg lg:text-xl font-semibold text-gray-700 dark:text-gray-200 mb-2">${__("games.join_the_competition")}</h2>\n                        <p class="text-gray-500 dark:text-gray-400 text-xs sm:text-sm">${__("games.unlock_features")}</p>\n                    </div>\n\n                    \x3c!-- Features --\x3e\n                    <div class="space-y-3 sm:space-y-4 lg:space-y-6">\n                        <div class="flex items-start space-x-2 sm:space-x-3">\n                            <div class="flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 lg:w-10 lg:h-10 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center">\n                                <span class="text-orange-600 dark:text-orange-400 text-base sm:text-lg lg:text-xl">🏅</span>\n                            </div>\n                            <div>\n                                <h3 class="font-medium text-gray-700 dark:text-gray-200 mb-1 text-xs sm:text-sm lg:text-base">${__("games.global_leaderboards")}</h3>\n                                <p class="text-xs lg:text-sm text-gray-500 dark:text-gray-400">${__("games.leaderboards_description")}</p>\n                            </div>\n                        </div>\n\n                        <div class="flex items-start space-x-2 sm:space-x-3">\n                            <div class="flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 lg:w-10 lg:h-10 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center">\n                                <span class="text-orange-600 dark:text-orange-400 text-base sm:text-lg lg:text-xl">💎</span>\n                            </div>\n                            <div>\n                                <h3 class="font-medium text-gray-700 dark:text-gray-200 mb-1 text-xs sm:text-sm lg:text-base">${__("games.personal_records")}</h3>\n                                <p class="text-xs lg:text-sm text-gray-500 dark:text-gray-400">${__("games.personal_records_description")}</p>\n                            </div>\n                        </div>\n\n                        <div class="flex items-start space-x-2 sm:space-x-3">\n                            <div class="flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 lg:w-10 lg:h-10 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center">\n                                <span class="text-orange-600 dark:text-orange-400 text-base sm:text-lg lg:text-xl">⚡</span>\n                            </div>\n                            <div>\n                                <h3 class="font-medium text-gray-700 dark:text-gray-200 mb-1 text-xs sm:text-sm lg:text-base">${__("games.exp_achievements")}</h3>\n                                <p class="text-xs lg:text-sm text-gray-500 dark:text-gray-400">${__("games.exp_achievements_description")}</p>\n                            </div>\n                        </div>\n\n                        <div class="flex items-start space-x-2 sm:space-x-3">\n                            <div class="flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 lg:w-10 lg:h-10 bg-orange-100 dark:bg-orange-900/30 rounded-full flex items-center justify-center">\n                                <span class="text-orange-600 dark:text-orange-400 text-base sm:text-lg lg:text-xl">🎯</span>\n                            </div>\n                            <div>\n                                <h3 class="font-medium text-gray-700 dark:text-gray-200 mb-1 text-xs sm:text-sm lg:text-base">${__("games.score_history")}</h3>\n                                <p class="text-xs lg:text-sm text-gray-500 dark:text-gray-400">${__("games.score_history_description")}</p>\n                            </div>\n                        </div>\n                    </div>\n\n                    \x3c!-- Security Info --\x3e\n                    <div class="text-center text-xs lg:text-sm text-gray-500 mt-4 sm:mt-6 lg:mt-8">\n                        <p class="mb-2">${__("games.safe_secure")}</p>\n                        <div class="flex justify-center space-x-3 sm:space-x-4">\n                            <span class="flex items-center">\n                                <svg class="w-3 h-3 lg:w-4 lg:h-4 mr-1 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.623 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"/>\n                                </svg>\n                                ${__("games.protected")}\n                            </span>\n                            <span class="flex items-center">\n                                <svg class="w-3 h-3 lg:w-4 lg:h-4 mr-1 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"/>\n                                </svg>\n                                ${__("games.quick_setup")}\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,a.appendChild(n),document.body.appendChild(a),a.addEventListener("click",e=>{e.target===a&&a.remove()});const r=e=>{"Escape"===e.key&&(a.remove(),document.removeEventListener("keydown",r))};document.addEventListener("keydown",r)})(o),i}catch(e){return e.message,{success:!1,error:e.message}}},e.__arcadeGetLeaderboard=async(e=null,a=10)=>{try{const o=e||t||r();if(!o)return{success:!1,error:"Game ID required"};s();const c=await n(`/leaderboard/${o}?limit=${a}`);return c.success&&s(c.data),c}catch(e){return e.message,{success:!1,error:e.message}}},e.__arcadeGetUserBest=async(e=null)=>{try{const a=e||t||r();if(!a)return{success:!1,error:"Game ID required"};s();const o=await n(`/user-best/${a}`);return o.success&&s(o.data),o}catch(e){return e.message,{success:!1,error:e.message}}},e.__arcadeGetUser=()=>e.user?{success:!0,user:e.user}:{success:!1,error:"User not authenticated"};const r=()=>{const e=$("#game-container").data("game-id");return e?parseInt(e):null};e.__ctlArcadeStartSession=async()=>({success:!1,error:"Session management not supported"}),e.__ctlArcadeEndSession=async()=>({success:!1,error:"Session management not supported"}),e.__ctlArcadeSubmitScore=async(t={})=>{try{const{score:s,mode:a="default"}=t;return"number"!=typeof s||s<0?{success:!1,error:"Invalid score value"}:await e.__arcadeSubmitScore(s,{mode:a})}catch(e){return{success:!1,error:e.message}}},e.__ctlArcadeStartLevel=async(e={})=>{const{level:t=1}=e;return{success:!0,message:"Level started",level:t}},e.__ctlArcadeRestartLevel=async(e={})=>{const{level:t=1}=e;return{success:!0,message:"Level restarted",level:t}},e.__ctlArcadeEndLevel=async(e={})=>{const{level:t=1}=e;return{success:!0,message:"Level ended",level:t}},e.__ctlArcadeSaveScore=async(t={})=>{const{score:s,mode:a="default"}=t;return"number"!=typeof s||s<0?{success:!1,error:"Score must be a positive number"}:await e.__arcadeSubmitScore(s,{mode:a})},e.__ctlArcadeShareEvent=async()=>({success:!1,error:"Share functionality not supported"}),e.__arcadeShowAd=async(e="interlevel",a={})=>{try{const o=t||r();if(!o)return{success:!1,error:"No game ID available"};s();const c=await n("/show-ad","POST",{game_id:o,ad_type:e,placement_context:a});if(200===c.status&&c.data){const{ad_code:e,placement_info:t}=c.data,s=$("#game-container").length?$("#game-container"):$("#emulatorjs-container"),a=$('\n                    <div id="arcade-ad-overlay" class="\n                        absolute inset-0 w-full h-full bg-black bg-opacity-80 backdrop-blur-sm\n                        hidden z-50 flex items-center justify-center flex-col\n                        transition-all duration-300 ease-in-out\n                    ">\n                        <div id="arcade-ad-content" class="\n                            bg-white rounded-xl shadow-2xl p-4 text-center relative\n                            inline-block max-w-4xl max-h-96\n                            border border-gray-200 backdrop-blur-lg\n                            transform scale-95 transition-transform duration-300\n                            overflow-hidden\n                        ">\n                            <button id="arcade-ad-close" class="\n                                absolute top-2 right-2 w-8 h-8\n                                bg-gray-900 hover:bg-red-600 text-white\n                                border-2 border-white rounded-full cursor-pointer\n                                text-sm leading-none z-10\n                                flex items-center justify-center\n                                transition-all duration-200 hover:scale-110\n                                shadow-lg hover:shadow-xl\n                            ">&times;</button>\n                        </div>\n                    </div>\n                ');s.length?s.css("position","relative").append(a):($("body").append(a),a.removeClass("absolute").addClass("fixed")),$("#arcade-ad-content").html(`\n                    <button id="arcade-ad-close" class="\n                        absolute top-2 right-2 w-8 h-8\n                        bg-gray-900 hover:bg-red-600 text-white\n                        border-2 border-white rounded-full cursor-pointer\n                        text-sm leading-none z-10\n                        flex items-center justify-center\n                        transition-all duration-200 hover:scale-110\n                        shadow-lg hover:shadow-xl\n                    ">&times;</button>\n                    <div class="ad-content-wrapper max-w-full max-h-full flex items-center justify-center">\n                        ${e}\n                    </div>\n                `),$("#arcade-ad-content").find("img").css({"max-width":"none","max-height":"none",width:"auto",height:"auto","object-fit":"none"}),$("#arcade-ad-content").find("iframe, video, embed, object").css({"max-width":"100%","max-height":"100%",width:"auto",height:"auto","object-fit":"contain"}),a.removeClass("hidden").addClass("flex"),setTimeout(()=>{$("#arcade-ad-content").removeClass("scale-95").addClass("scale-100")},50);const n=setTimeout(()=>{r()},8e3),r=()=>{$("#arcade-ad-content").removeClass("scale-100").addClass("scale-95"),setTimeout(()=>{a.removeClass("flex").addClass("hidden"),a.remove()},300)};return $("#arcade-ad-close").off("click").on("click",()=>{clearTimeout(n),r()}),{success:!0,message:"Ad displayed successfully",placement_info:t}}return c}catch(e){return e.message,{success:!1,error:e.message}}},e.__ctlArcadeShowInterlevelAD=async()=>await e.__arcadeShowAd("interlevel",{placement:"game-interlevel"}),$(document).ready(()=>{let a=$("#game-container").data("game-id");a&&(e=>{t=e,s()})(parseInt(a)),$(e).on("message",t=>{const a=t.originalEvent,{type:n,data:r,source:o}=a.data||{};if(!o||"ctl_arcade_game"!==o)return;const c=(e,t)=>{a.source.postMessage({type:e,data:t,source:"arcade_parent"},a.origin)};switch(s(a.origin),n){case"ctl_arcade_start_session":e.__ctlArcadeStartSession().then(e=>c("ctl_arcade_session_started",e)).catch(e=>c("ctl_arcade_session_started",{success:!1,error:e.message}));break;case"ctl_arcade_end_session":e.__ctlArcadeEndSession().then(e=>c("ctl_arcade_session_ended",e)).catch(e=>c("ctl_arcade_session_ended",{success:!1,error:e.message}));break;case"ctl_arcade_start_level":e.__ctlArcadeStartLevel(r).then(e=>c("ctl_arcade_level_started",e)).catch(e=>c("ctl_arcade_level_started",{success:!1,error:e.message}));break;case"ctl_arcade_restart_level":e.__ctlArcadeRestartLevel(r).then(e=>c("ctl_arcade_level_restarted",e)).catch(e=>c("ctl_arcade_level_restarted",{success:!1,error:e.message}));break;case"ctl_arcade_end_level":e.__ctlArcadeEndLevel(r).then(e=>c("ctl_arcade_level_ended",e)).catch(e=>c("ctl_arcade_level_ended",{success:!1,error:e.message}));break;case"ctl_arcade_save_score":e.__ctlArcadeSaveScore(r).then(e=>c("ctl_arcade_score_saved",e)).catch(e=>c("ctl_arcade_score_saved",{success:!1,error:e.message}));break;case"ctl_arcade_show_interlevel_ad":e.__ctlArcadeShowInterlevelAD().then(e=>c("ctl_arcade_ad_shown",e)).catch(e=>c("ctl_arcade_ad_shown",{success:!1,error:e.message}));break;case"ctl_arcade_share_event":e.__ctlArcadeShareEvent(r).then(e=>c("ctl_arcade_event_shared",e)).catch(e=>c("ctl_arcade_event_shared",{success:!1,error:e.message}));break;default:s(),c("unknown_message_type",{success:!1,error:"Unknown message type",type:n})}})})}(window);