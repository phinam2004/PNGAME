!function(t){"use strict";window.GeneralAdManager={gameFrame:null,isPlaying:!1,lastAdTime:0,adCooldown:18e4,init:function(t){this.gameFrame=t,this.setupEventListeners(),setTimeout(()=>{this.showPrerollAd()},2e3)},setupEventListeners:function(){t(document).on("pjax:send",()=>{this.destroy()}),t(this.gameFrame).on("load",()=>{this.isPlaying=!0,this.scheduleInterstitialAd()}),t(this.gameFrame).on("click mousedown mouseup keydown",()=>{this.isPlaying||(this.isPlaying=!0)}),t(window).on("focus",()=>{this.gameFrame&&(this.isPlaying=!0)}),t(window).on("blur",()=>{this.isPlaying=!1}),window.triggerGeneralInterstitial=()=>{this.showInterstitialAd()}},showPrerollAd:async function(){if("function"==typeof window.__arcadeShowAd)try{const t=await window.__arcadeShowAd("preroll",{placement:"game-preroll"});t&&t.success}catch(t){}},showInterstitialAd:async function(){const t=Date.now();if(!(t-this.lastAdTime<this.adCooldown)&&this.isPlaying&&"function"==typeof window.__arcadeShowAd)try{const i=await window.__arcadeShowAd("interlevel",{placement:"game-interlevel"});i&&i.success&&(this.lastAdTime=t)}catch(t){}},scheduleInterstitialAd:function(){[6e4,18e4,3e5].forEach(t=>{const i=setTimeout(()=>{this.isPlaying&&this.gameFrame&&this.showInterstitialAd()},t);this.timers||(this.timers=[]),this.timers.push(i)});const t=setTimeout(()=>{const t=setInterval(()=>{this.isPlaying&&this.gameFrame?this.showInterstitialAd():this.gameFrame||clearInterval(t)},24e4);this.recurringInterval=t},12e4);this.timers||(this.timers=[]),this.timers.push(t)},destroy:function(){this.timers&&(this.timers.forEach(t=>clearTimeout(t)),this.timers=[]),this.recurringInterval&&(clearInterval(this.recurringInterval),this.recurringInterval=null),this.gameFrame=null,this.isPlaying=!1}},window.showGeneralInterstitial=function(){window.GeneralAdManager&&"function"==typeof window.GeneralAdManager.showInterstitialAd&&window.GeneralAdManager.showInterstitialAd()}}(jQuery);